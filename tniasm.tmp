Main.s1FNAME "msx-wings.rom" 3PageSize: equ 0x4000 4Seg_P8000_SW: equ 0x7000 67 org 0x4000, 0xbeff 9 10 Include/RomHeader.s12 db "AB" 3 dw Execute 4 dw 0 6 dw 0 8 dw 0 9 dw 0, 0, 0 10 11Main.s11 Include/MsxBios.s189BIOS_HWVER: equ 0x002d1112BIOS_CGTABL: equ 0x0004 13BIOS_VDP_DR: equ 0x0006 14BIOS_VDP_DW: equ 0x0007 1617BIOS_CHKRAM: equ 0x000018BIOS_SYNCHR: equ 0x000819BIOS_RDSLT: equ 0x000c20BIOS_CHRGTR: equ 0x001021BIOS_WRSLT: equ 0x001422BIOS_OUTDO: equ 0x001823BIOS_CALSLT: equ 0x001c24BIOS_DCOMPR: equ 0x002025BIOS_ENASLT: equ 0x002426BIOS_GETYPR: equ 0x002827BIOS_CALLF: equ 0x003028BIOS_KEYINT: equ 0x00383031BIOS_INITIO: equ 0x003b32BIOS_INIFNK: equ 0x003e3435BIOS_DISSCR: equ 0x004136BIOS_ENASCR: equ 0x004437BIOS_WRTVDP: equ 0x004738BIOS_RDVRM: equ 0x004a39BIOS_WRTVRM: equ 0x004d40BIOS_SETRD: equ 0x005041BIOS_SETWRT: equ 0x005342BIOS_FILVRM: equ 0x005643BIOS_LDIRMV: equ 0x005944BIOS_LDIRVM: equ 0x005c45BIOS_CHGMOD: equ 0x005f46BIOS_CHGCLR: equ 0x006247BIOS_NMI: equ 0x006648BIOS_CLRSPR: equ 0x006949BIOS_INITXT: equ 0x006c50BIOS_INIT32: equ 0x006f51BIOS_INIGRP: equ 0x007252BIOS_INIMLT: equ 0x007553BIOS_SETTXT: equ 0x007854BIOS_SETT32: equ 0x007b55BIOS_SETGRP: equ 0x007e56BIOS_SETMLT: equ 0x008157BIOS_CALPAT: equ 0x008458BIOS_CALATR: equ 0x008759BIOS_GSPSIZ: equ 0x008a60BIOS_GRPPRT: equ 0x008d6263BIOS_GICINI: equ 0x009064BIOS_WRTPSG: equ 0x009365BIOS_RDPSG: equ 0x009666BIOS_STRTMS: equ 0x00996869BIOS_CHSNS: equ 0x009c70BIOS_CHGET: equ 0x009f71BIOS_CHPUT: equ 0x00a272BIOS_LPTOUT: equ 0x00a573BIOS_LPTSTT: equ 0x00a874BIOS_CNVCHR: equ 0x00ab75BIOS_PINLIN: equ 0x00ae76BIOS_INLIN: equ 0x00b177BIOS_QINLIN: equ 0x00b478BIOS_BREAKX: equ 0x00b779BIOS_BEEP: equ 0x00c080BIOS_CLS: equ 0x00c381BIOS_POSIT: equ 0x00c682BIOS_FNKSB: equ 0x00c983BIOS_ERAFNK: equ 0x00cc84BIOS_DSPFNK: equ 0x00cf85BIOS_TOTEXT: equ 0x00d28788BIOS_GTSTCK: equ 0x00d589BIOS_GTTRIG: equ 0x00d890BIOS_GTPAD: equ 0x00db91BIOS_GTPDL: equ 0x00de9394BIOS_TAPION: equ 0x00e195BIOS_TAPIN: equ 0x00e496BIOS_TAPIOF: equ 0x00e797BIOS_TAPOON: equ 0x00ea98BIOS_TAPOUT: equ 0x00ed99BIOS_TAPOOF: equ 0x00f0100BIOS_STMOTR: equ 0x00f3102103BIOS_CHGCAP: equ 0x0132104BIOS_CHGSND: equ 0x0135105BIOS_RSLREG: equ 0x0138106BIOS_WSLREG: equ 0x013b107BIOS_RDVDP: equ 0x013e108BIOS_SNSMAT: equ 0x0141109BIOS_PHYDIO: equ 0x0144110BIOS_ISFLIO: equ 0x014a111BIOS_OUTDLP: equ 0x014d112BIOS_KILBUF: equ 0x0156113BIOS_CALBAS: equ 0x0159115116BIOS_SUBROM: equ 0x015c117BIOS_EXTROM: equ 0x015f118BIOS_EOL: equ 0x0168119BIOS_BIGFIL: equ 0x016b120BIOS_NSETRD: equ 0x016e121BIOS_NSTWRT: equ 0x0171122BIOS_NRDVRM: equ 0x0174123BIOS_NWRVRM: equ 0x0177125126BIOS_GRPRT: equ 0x0089127BIOS_NVBXLN: equ 0x00c9128BIOS_NVBXFL: equ 0x00cd129BIOS_CLSSUB: equ 0x0115130BIOS_VDPSTA: equ 0x0131131BIOS_SETPAG: equ 0x013d132BIOS_INIPLT: equ 0x0141133BIOS_RSTPLT: equ 0x0145134BIOS_GETPLT: equ 0x0149135BIOS_SETPLT: equ 0x014d136BIOS_PROMPT: equ 0x0181137BIOS_NEWPAD: equ 0x01ad138BIOS_CHGMDP: equ 0x01b5139BIOS_KNJPRT: equ 0x01bd140BIOS_REDCLK: equ 0x01f5141BIOS_WRTCLK: equ 0x01f9143144BIOS_RDPRIM: equ 0xf380145BIOS_WRPRIM: equ 0xf385146BIOS_CLPRIM: equ 0xf38c148149BIOS_USRTAB: equ 0xf39a150BIOS_LINL40: equ 0xf3ae151BIOS_LINL32: equ 0xf3af152BIOS_LINLEN: equ 0xf3b0153BIOS_CRTCNT: equ 0xf3b1154BIOS_CLMLST: equ 0xf3b2156157BIOS_TXTNAM: equ 0xf3b3158BIOS_TXTCOL: equ 0xf3b5159BIOS_TXTCGP: equ 0xf3b7160BIOS_TXTATR: equ 0xf3b9161BIOS_TXTPAT: equ 0xf3bb163164BIOS_T32NAM: equ 0xf3bd165BIOS_T32COL: equ 0xf3bf166BIOS_T32CGP: equ 0xf3c1167BIOS_T32ATR: equ 0xf3c3168BIOS_T32PAT: equ 0xf3c5170171BIOS_GRPNAM: equ 0xf3c7172BIOS_GRPCOL: equ 0xf3c9173BIOS_GRPCGP: equ 0xf3cb174BIOS_GRPATR: equ 0xf3cd175BIOS_GRPPAT: equ 0xf3cf177178BIOS_MLTNAM: equ 0xf3d1179BIOS_MLTCOL: equ 0xf3d3180BIOS_MLTCGP: equ 0xf3d5181BIOS_MLTATR: equ 0xf3d7182BIOS_MLTPAT: equ 0xf3d9184185BIOS_CLIKSW: equ 0xf3db186BIOS_CSRY: equ 0xf3dc187BIOS_CSRX: equ 0xf3dd188BIOS_CNSDFG: equ 0xf3de190191BIOS_RG0SAV: equ 0xf3df192BIOS_RG1SAV: equ 0xf3e0193BIOS_RG2SAV: equ 0xf3e1194BIOS_RG3SAV: equ 0xf3e2195BIOS_RG4SAV: equ 0xf3e3196BIOS_RG5SAV: equ 0xf3e4197BIOS_RG6SAV: equ 0xf3e5198BIOS_RG7SAV: equ 0xf3e6199BIOS_RG8SAV: equ 0xffe7200BIOS_RG9SAV: equ 0xffe8201BIOS_STATFL: equ 0xf3e7202BIOS_TRGFLG: equ 0xf3e8203BIOS_FORCLR: equ 0xf3e9204BIOS_BAKCLR: equ 0xf3ea205BIOS_BDRCLR: equ 0xf3eb206BIOS_MAXUPD: equ 0xf3ec207BIOS_MINUPD: equ 0xf3ef208BIOS_ATRBYT: equ 0xf3f2210211BIOS_QUEUES: equ 0xf3f3212BIOS_FRCNEW: equ 0xf3f5214215BIOS_SCNCNT: equ 0xf3f6216BIOS_REPCNT: equ 0xf3f7217BIOS_PUTPNT: equ 0xf3f8218BIOS_GETPNT: equ 0xf3fa220221BIOS_CS120: equ 0xf3fc222BIOS_LOW: equ 0xf406223BIOS_HIGH: equ 0xf408224BIOS_HEADER: equ 0xf40a225BIOS_ASPCT1: equ 0xf40b226BIOS_ASPCT2: equ 0xf40d227BIOS_ENDPRG: equ 0xf40f229230BIOS_ERRFLG: equ 0xf414231BIOS_LPTPOS: equ 0xf415232BIOS_PRTFLG: equ 0xf416233BIOS_NTMSXP: equ 0xf417234BIOS_RAWPRT: equ 0xf418235BIOS_VLZADR: equ 0xf419236BIOS_VLZDAT: equ 0xf41b237BIOS_CURLIN: equ 0xf41c238BIOS_KBUF: equ 0xf41f239BIOS_BUFMIN: equ 0xf55d240BIOS_BUF: equ 0xf55e241BIOS_ENDBUF: equ 0xf660242BIOS_TTYPOS: equ 0xf661243BIOS_DIMFLG: equ 0xf662244BIOS_VALTYP: equ 0xf663245BIOS_DORES: equ 0xf664246BIOS_DONUM: equ 0xf665247BIOS_CONTXT: equ 0xf666248BIOS_CONSAV: equ 0xf668249BIOS_CONTYP: equ 0xf669250BIOS_CONLO: equ 0xf66a251BIOS_MEMSIZ: equ 0xf672252BIOS_STKTOP: equ 0xf674253BIOS_TXTTAB: equ 0xf676254BIOS_TEMPPT: equ 0xf768255BIOS_TEMPST: equ 0xf67a256BIOS_DSCTMP: equ 0xf698257BIOS_FRETOP: equ 0xf69b258BIOS_TEMP3: equ 0xf69d259BIOS_TEMP8: equ 0xf69f260BIOS_ENDFOR: equ 0xf6a1261BIOS_SUBFLG: equ 0xf6a5262BIOS_FLGINP: equ 0xf6a6263BIOS_TEMP: equ 0xf6a7264BIOS_PTRFLG: equ 0xf6a9265BIOS_AUTFLG: equ 0xf6aa266BIOS_AUTLIN: equ 0xf6ab267BIOS_AUTINC: equ 0xf6ad268BIOS_SAVTXT: equ 0xf6af269BIOS_ERRLIN: equ 0xf6b3270BIOS_DOT: equ 0xf6b5271BIOS_ERRTXT: equ 0xf6b7272BIOS_ONELIN: equ 0xf6b9273BIOS_ONEFLG: equ 0xf6bb274BIOS_TEMP2: equ 0xf6bc275BIOS_OLDLIN: equ 0xf6be276BIOS_OLDTXT: equ 0xf6c0277BIOS_VARTAB: equ 0xf6c2278BIOS_ARYTAB: equ 0xf6c4279BIOS_STREND: equ 0xf6c6280BIOS_DATPTR: equ 0xf6c8281BIOS_DEFTBL: equ 0xf6ca282BIOS_PRMSTK: equ 0xf6e4283BIOS_PRMLEN: equ 0xf6e6284BIOS_PARM1: equ 0xf6e8285BIOS_PRMPRV: equ 0xf74c286BIOS_PRMLN2: equ 0xf74e287BIOS_PARM2: equ 0xf750288BIOS_PRMFLG: equ 0xf7b4289BIOS_ARYTA2: equ 0xf7b5290BIOS_NOFUNS: equ 0xf7b7291BIOS_TEMP9: equ 0xf7b8292BIOS_FUNACT: equ 0xf7ba293BIOS_SWPTMP: equ 0xf7bc294BIOS_TRCFLG: equ 0xf7c4296297BIOS_FBUFFR: equ 0xf7c5298BIOS_DECTMP: equ 0xf7f0299BIOS_DECTM2: equ 0xf7f2300BIOS_DECCNT: equ 0xf7f4301BIOS_DAC: equ 0xf7f6302BIOS_HOLD8: equ 0xf806303BIOS_HOLD2: equ 0xf836304BIOS_HOLD: equ 0xf83e305BIOS_ARG: equ 0xf847306BIOS_RNDX: equ 0xf857308309BIOS_USRDATA: equ 0xf7f8311312BIOS_MAXFIL: equ 0xf85f313BIOS_FILTAB: equ 0xf860314BIOS_NULBUF: equ 0xf862315BIOS_PTRFIL: equ 0xf864316BIOS_RUNFLG: equ 0xf866317BIOS_FILNAM: equ 0xf866318BIOS_FILNM2: equ 0xf871319BIOS_NLONLY: equ 0xf87c320BIOS_SAVEND: equ 0xf87d321BIOS_FNKSTR: equ 0xf87f322BIOS_CGPNT: equ 0xf91f323BIOS_NAMBAS: equ 0xf922324BIOS_CGPBAS: equ 0xf924325BIOS_PATBAS: equ 0xf926326BIOS_ATRBAS: equ 0xf928327BIOS_CLOC: equ 0xf92a328BIOS_CMASK: equ 0xf92c329BIOS_MINDEL: equ 0xf92d330BIOS_MAXDEL: equ 0xf92f332333BIOS_ASPECT: equ 0xf931334BIOS_CENCNT: equ 0xf933335BIOS_CLINEF: equ 0xf935336BIOS_CNPNTS: equ 0xf936337BIOS_CPLOTF: equ 0xf938338BIOS_CPCNT: equ 0xf939339BIOS_CPNCNT8: equ 0xf93b340BIOS_CPCSUM: equ 0xf93d341BIOS_CSTCNT: equ 0xf93f342BIOS_CSCLXY: equ 0xf941343BIOS_CSAVEA: equ 0xf942344BIOS_CSAVEM: equ 0xf944345BIOS_CXOFF: equ 0xf945346BIOS_CYOFF: equ 0xf947348349BIOS_LOHMSK: equ 0xf949350BIOS_LOHDIR: equ 0xf94a351BIOS_LOHADR: equ 0xf94b352BIOS_LOHCNT: equ 0xf94d353BIOS_SKPCNT: equ 0xf94f354BIOS_MIVCNT: equ 0xf951355BIOS_PDIREC: equ 0xf953356BIOS_LFPROG: equ 0xf954357BIOS_RTPROG: equ 0xf955359360BIOS_MCLTAB: equ 0xf956361BIOS_MCLFLG: equ 0xf958362BIOS_QUETAB: equ 0xf959363BIOS_QUEBAK: equ 0xf971364BIOS_VOICAQ: equ 0xf975365BIOS_VOICBQ: equ 0xf9f5366BIOS_VOICCQ: equ 0xfa75368369BIOS_DPPAGE: equ 0xfaf5370BIOS_ACPAGE: equ 0xfaf6371BIOS_AVCSAV: equ 0xfaf7372BIOS_EXBRSA: equ 0xfaf8373BIOS_CHRCNT: equ 0xfaf9374BIOS_ROMA: equ 0xfafa375BIOS_MODE: equ 0xfafc376BIOS_NORUSE: equ 0xfafd377BIOS_XSAVE: equ 0xfafe378BIOS_YSAVE: equ 0xfb00379BIOS_LOGOPR: equ 0xfb02381382BIOS_RSTMP: equ 0xfb03383BIOS_TOCNT: equ 0xfb03384BIOS_RSFCB: equ 0xfb04385BIOS_RSIQLN: equ 0xfb06386BIOS_MEXBIH: equ 0xfb07387BIOS_OLDSTT: equ 0xfb0c388BIOS_OLDINT: equ 0xfb12389BIOS_DEVNUM: equ 0xfb17390BIOS_DATCNT: equ 0xfb18391BIOS_ERRORS: equ 0xfb1b392BIOS_FLAGS: equ 0xfb1c393BIOS_ESTBLS: equ 0xfb1d394BIOS_COMMSK: equ 0xfb1e395BIOS_LSTCOM: equ 0xfb1f396BIOS_LSTMOD: equ 0xfb20398399BIOS_PRSCNT: equ 0xfb35400BIOS_SAVSP: equ 0xfb36401BIOS_VOICEN: equ 0xfb38402BIOS_SAVVOL: equ 0xfb39403BIOS_MCLLEN: equ 0xfb3b404BIOS_MCLPTR: equ 0xfb3c405BIOS_QUEUEN: equ 0xfb3e406BIOS_MUSICF: equ 0xfc3f407BIOS_PLYCNT: equ 0xfb40409410BIOS_VCBA: equ 0xfb41411BIOS_VCBB: equ 0xfb66412BIOS_VCBC: equ 0xfb8b414415BIOS_ENSTOP: equ 0xfbb0416BIOS_BASROM: equ 0xfbb1417BIOS_LINTTB: equ 0xfbb2418BIOS_FSTPOS: equ 0xfbca419BIOS_CODSAV: equ 0xfbcc420BIOS_FNKSW1: equ 0xfbcd421BIOS_FNKFLG: equ 0xfbce422BIOS_ONGSBF: equ 0xfbd8423BIOS_CLIKFL: equ 0xfbd9424BIOS_OLDKEY: equ 0xfbda425BIOS_NEWKEY: equ 0xfbe5426BIOS_KEYBUF: equ 0xfbf0427BIOS_LINWRK: equ 0xfc18428BIOS_PATWRK: equ 0xfc40429BIOS_BOTTOM: equ 0xfc48430BIOS_HIMEM: equ 0xfc4a431BIOS_TRAPTBL: equ 0xfc4c432BIOS_RTYCNT: equ 0xfc9a433BIOS_INTFLG: equ 0xfc9b434BIOS_PADY: equ 0xfc9c435BIOS_PADX: equ 0xfc9d436BIOS_JIFFY: equ 0xfc9e437BIOS_INTVAL: equ 0xfca0438BIOS_INTCNT: equ 0xfca2439BIOS_LOWLIM: equ 0xfca4440BIOS_WINWID: equ 0xfca5441BIOS_GRPHED: equ 0xfca6442BIOS_ESCCNT: equ 0xfca7443BIOS_INSFLG: equ 0xfca8444BIOS_CSRSW: equ 0xfca9445BIOS_CSTYLE: equ 0xfcaa446BIOS_CAPST: equ 0xfcab447BIOS_KANAST: equ 0xfcac448BIOS_KANAMD: equ 0xfcad449BIOS_FLBMEM: equ 0xfcae450BIOS_SCRMOD: equ 0xfcaf451BIOS_OLDSCR: equ 0xfcb0452BIOS_CASPRV: equ 0xfcb1453BIOS_BRDATR: equ 0xfcb2454BIOS_GXPOS: equ 0xfcb3455BIOS_GYPOS: equ 0xfcb5456BIOS_GRPACX: equ 0xfcb7457BIOS_GRPACY: equ 0xfcb9458BIOS_DRWFLG: equ 0xfcbb459BIOS_DRWSCL: equ 0xfcbc460BIOS_DRWANG: equ 0xfcbd461BIOS_RUNBNF: equ 0xfcbe462BIOS_SAVENT: equ 0xfcbf463BIOS_ROMSLT: equ 0xfcc0464BIOS_EXPTBL: equ 0xfcc1465BIOS_SLTTBL: equ 0xfcc5466BIOS_SLTATR: equ 0xfcc9467BIOS_SLTWRK: equ 0xfd09468BIOS_PROCNM: equ 0xfd89469BIOS_DEVICE: equ 0xfd99471472BIOS_H_KEYI: equ 0xfd9a473BIOS_H_TIMI: equ 0xfd9f474BIOS_H_CHPH: equ 0xfda4475BIOS_H_DSPC: equ 0xfda9476BIOS_H_ERAC: equ 0xfdae477BIOS_H_DSPF: equ 0xfdb3478BIOS_H_ERAF: equ 0xfdb8479BIOS_H_TOTE: equ 0xfdbd480BIOS_H_CHGE: equ 0xfdc2481BIOS_H_INIP: equ 0xfdc7482BIOS_H_KEYC: equ 0xfdcc483BIOS_H_KYEA: equ 0xfdd1484BIOS_H_NMI: equ 0xfdd6485BIOS_H_PINL: equ 0xfddb486BIOS_H_QINL: equ 0xfde0487BIOS_H_INLI: equ 0xfde5488BIOS_H_ONGO: equ 0xfdea489BIOS_H_DSKO: equ 0xfdef490BIOS_H_SETS: equ 0xfdf4491BIOS_H_NAME: equ 0xfdf9492BIOS_H_KILL: equ 0xfdfe493BIOS_H_IPL: equ 0xfe03494BIOS_H_COPY: equ 0xfe08495BIOS_H_CMD: equ 0xfe0d496BIOS_H_DSKF: equ 0xfe12497BIOS_H_DSKI: equ 0xfe17498BIOS_H_ATTR: equ 0xfe1c499BIOS_H_LSET: equ 0xfe21500BIOS_H_RSET: equ 0xfe26501BIOS_H_FIEL: equ 0xfe2b502BIOS_H_MKI: equ 0xfe30503BIOS_H_MKS: equ 0xfe35504BIOS_H_MKD: equ 0xfe3a505BIOS_H_CVI: equ 0xfe3f506BIOS_H_CVS: equ 0xfe44507BIOS_H_CVD: equ 0xfe49508BIOS_H_GETP: equ 0xfe4e509BIOS_H_SETF: equ 0xfe53510BIOS_H_NOFO: equ 0xfe58511BIOS_H_NULO: equ 0xfe5d512BIOS_H_NTFL: equ 0xfe62513BIOS_H_MERG: equ 0xfe67514BIOS_H_SAVE: equ 0xfe6c515BIOS_H_BINS: equ 0xfe71516BIOS_H_BINL: equ 0xfe76517BIOS_H_FILE: equ 0xfd7b518BIOS_H_DGET: equ 0xfe80519BIOS_H_FILO: equ 0xfe85520BIOS_H_INDS: equ 0xfe8a521BIOS_H_RSLF: equ 0xfe8f522BIOS_H_SAVD: equ 0xfe94523BIOS_H_LOC: equ 0xfe99524BIOS_H_LOF: equ 0xfe9e525BIOS_H_EOF: equ 0xfea3526BIOS_H_FPOS: equ 0xfea8527BIOS_H_BAKU: equ 0xfead528BIOS_H_PARD: equ 0xfeb2529BIOS_H_NODE: equ 0xfeb7530BIOS_H_POSD: equ 0xfebc531BIOS_H_DEVN: equ 0xfec1532BIOS_H_GEND: equ 0xfec6533BIOS_H_RUNC: equ 0xfecb534BIOS_H_CLEAR: equ 0xfed0535BIOS_H_LOPD: equ 0xfed5536BIOS_H_STKE: equ 0xfeda537BIOS_H_ISFL: equ 0xfedf538BIOS_H_OUTD: equ 0xfee4539BIOS_H_CRDO: equ 0xfee9540BIOS_H_DSKC: equ 0xfeee541BIOS_H_DOGR: equ 0xfef3542BIOS_H_PRGE: equ 0xfef8543BIOS_H_ERRP: equ 0xfefd544BIOS_H_ERRF: equ 0xff02545BIOS_H_READ: equ 0xff07546BIOS_H_MAIN: equ 0xff0c547BIOS_H_DIRD: equ 0xff11548BIOS_H_FINI: equ 0xff16549BIOS_H_FINE: equ 0xff1b550BIOS_H_CRUN: equ 0xff20551BIOS_H_CRUS: equ 0xff25552BIOS_H_ISRE: equ 0xff2a553BIOS_H_NTFN: equ 0xff2f554BIOS_H_NOTR: equ 0xff34555BIOS_H_SNGF: equ 0xff39556BIOS_H_NEWS: equ 0xff3e557BIOS_H_GONE: equ 0xff43558BIOS_H_CHRG: equ 0xff48559BIOS_H_RETU: equ 0xff4d560BIOS_H_PRTF: equ 0xff52561BIOS_H_COMP: equ 0xff57562BIOS_H_FINP: equ 0xff5c563BIOS_H_TRMN: equ 0xff61564BIOS_H_FRME: equ 0xff66565BIOS_H_NTPL: equ 0xff6b566BIOS_H_EVAL: equ 0xff70567BIOS_H_OKNO: equ 0xff75568BIOS_H_FING: equ 0xff7a569BIOS_H_ISMI: equ 0xff7f570BIOS_H_WIDT: equ 0xff84571BIOS_H_LIST: equ 0xff89572BIOS_H_BUFL: equ 0xff8e573BIOS_H_FRQI: equ 0xff93574BIOS_H_SCNE: equ 0xff98575BIOS_H_FRET: equ 0xff9d576BIOS_H_PTRG: equ 0xffa2577BIOS_H_PHYD: equ 0xffa7578BIOS_H_FORM: equ 0xffac579BIOS_H_ERRO: equ 0xffb1580BIOS_H_LPTO: equ 0xffb6581BIOS_H_LPTS: equ 0xffbb582BIOS_H_SCRE: equ 0xffc0583BIOS_H_PLAY: equ 0xffc5585586BIOS_FCALL: equ 0xffca587BIOS_DISINT: equ 0xffcf588BIOS_ENAINT: equ 0xffd4592597598HKEYI: equ $fd9a 599HTIMI: equ $fd9f 601HOOK_SIZE: equ HTIMI - HKEYI604605MSXID1: equ $002b 609MSXID2: equ $002c 612MSXID3: equ $002d 617MSXID4: equ $002e 618MSXID5: equ $002f 619Main.s12 Include/MsxConstants.s1PORT_0: equ 0x982PORT_1: equ 0x993PORT_2: equ 0x9a4PORT_3: equ 0x9b78REG1SAV: equ 0xF3E010REG8SAV: equ 0xFFE711REG9SAV: equ 0xFFE812Main.s13 Include/CommonRoutines.s145ClearRam:6 ld hl, RamStart 7 ld de, RamEnd + 1 9.loop:10 xor a 11 ld (hl), a13 inc hl14 call BIOS_DCOMPR 15 ret z16 jp .loop2024SetPaletteColor:25 push bc26 27 ld b, a 28 ld c, 16 29 call BIOS_WRTVDP30 ld c, 0x9a 31 pop de33 ld a, d 34 di35 out (c), a36 ld a, e 37 ei38 out (c), a40 ret4445LoadPalette:46 47 ld b, 0 48 ld c, 16 49 call BIOS_WRTVDP50 ld c, PORT_2 52 ld b, 1653.loop:54 di55 ld a, (hl)56 out (c), a57 inc hl58 ld a, (hl)59 out (c), a60 ei61 inc hl62 djnz .loop63 64 ret6869EnableRomPage2:7072 call BIOS_RSLREG73 rrca74 rrca75 and 3 76 ld c,a77 ld b,078 ld hl, BIOS_EXPTBL79 add hl,bc80 ld a,(hl)81 and 80h82 or c83 ld c,a84 inc hl85 inc hl86 inc hl87 inc hl88 ld a,(hl)89 and 0Ch90 or c91 ld h,080h92 call BIOS_ENASLT 94 ret97101Wait_B_Vblanks:102 103 push bc104 105 .loop:107 ld a, (BIOS_JIFFY)108 ld c, a109 .waitVBlank:110 ld a, (BIOS_JIFFY)111 cp c112 jp z, .waitVBlank114 djnz .loop115 116 pop bc118 ret120Wait:121 ld c, 15123 .loop:124 ld a, (BIOS_JIFFY)125 ld b, a126 .waitVBlank:127 ld a, (BIOS_JIFFY)128 cp b129 jp z, .waitVBlank131 dec c132 jp nz, .loop134138SetVdp_Write:139 rlc h140 rla141 rlc h142 rla143 srl h144 srl h145 di146 out (PORT_1),a147 ld a,14 + 128148 out (PORT_1),a149 ld a,l150 nop151 out (PORT_1),a152 ld a,h153 or 64154 ei155 out (PORT_1),a156 ret158162SetVdp_Read:163 rlc h164 rla165 rlc h166 rla167 srl h168 srl h169 di170 out (PORT_1),a171 ld a,14 + 128172 out (PORT_1),a173 ld a,l174 nop175 out (PORT_1),a176 ld a,h177 ei178 out (PORT_1),a179 ret182190211 212214216218220225233241244ClearVram_MSX2:245 xor a 246 ld hl, 0 247 call SetVDP_Write249259 xor a261 ld d, 2 262.loop_2:263 ld c, 0 264.loop_1:265 ld b, 0 266.loop:267 out (PORT_0), a268 djnz .loop269 dec c270 jp nz, .loop_1271 dec d272 jp nz, .loop_2274 ret277Screen11:278 280 ld a, 8281 call BIOS_CHGMOD282 ld b, 0001 1000 b 283 ld c, 25 284 call BIOS_WRTVDP285 ret287SetSprites16x16:288 ld a, (REG1SAV)289 or 0000 0010 b290 ld b, a291 ld c, 1 292 call BIOS_WRTVDP293 ret295Set192Lines:296 300 ld a, (REG9SAV)301 and 0111 1111 b302 ld b, a303 ld c, 9 304 call BIOS_WRTVDP305 ret307SetColor0ToTransparent:308 312 ld a, (REG8SAV)313 and 1101 1111 b314 ld b, a315 ld c, 8 316 call BIOS_WRTVDP317 ret319323LDIRVM_MSX2:324 325 ex de, hl326 327 call SetVdp_Write328 ex de, hl329 ld d, c330 331 ld c, PORT_0 332 ld b, 0333.loop_1:334 otir335 dec d336 jp nz, .loop_1337 ret341359 368 372379CheckCollision_16x24_16x16:381 ld a, d 382 sub b 383 jr c, .x1IsLarger 384 sub 16 385 ret nc 386 jp .checkVerticalCollision387.x1IsLarger:388 neg 393 394 sub 16 395 ret nc 397.checkVerticalCollision:398 ld a, e 399 sub c 400 jr c, .y1IsLarger 401 sub 24 402 ret 403.y1IsLarger:404 neg 409 410 sub 16 411 ret 415420423433437440443448 449451458462464472 473481487494500503510516524526534541548551557559 561569574579583586597604609614617624629631637640642646650652655658661666 667670673 674679683686691 692695697 698703707711DoCopy:712 ld a, 32713 di714 out (PORT_1), a715 ld a, 17 + 128716 out (PORT_1), a717 ld c, 0x9B718.vdpReady:719 ld a, 2720 di721 out (PORT_1), a 722 ld a, 15 + 128723 out (PORT_1), a724 in a, (PORT_1)725 rra726 ld a, 0 727 out (PORT_1), a728 ld a, 15 + 128729 ei730 out (PORT_1), a 731 jp c, .vdpReady732 outi 733 outi 734 outi735 outi736 outi737 outi738 outi739 outi740 outi741 outi742 outi743 outi744 outi745 outi746 outi747 retMain.s15 16 InitVram.s1InitVram:3 4 ld a, 05 ld (BIOS_CLIKSW), a 7 8 ld a, 1 9 ld (BIOS_FORCLR), a 10 ld a, 1 11 ld (BIOS_BAKCLR), a 12 ld a, 1 13 ld (BIOS_BDRCLR), a 14 call BIOS_CHGCLR 16 call Screen1118 call BIOS_DISSCR20 call ClearVram_MSX222 call SetSprites16x1624 call Set192Lines26 call SetColor0ToTransparent28 3540 ld b, 1111 0101 b 41 ld c, 5 42 call BIOS_WRTVDP43 44 ld b, 0000 0011 b 45 ld c, 11 46 call BIOS_WRTVDP4853 ld b, 0011 1110 b 54 ld c, 6 55 call BIOS_WRTVDP57NAMTBL: equ 0x000058SPRPAT: equ 0xf000 59SPRCOL: equ 0xf80060SPRATR: equ 0xfa0065 ld hl, PaletteData66 call LoadPalette7072 73 ld a, 0000 0001 b74 ld hl, SPRPAT75 call SetVdp_Write76 ld b, SpritePattern_PlayerPlane_0_and_1.size77 ld c, PORT_0 78 ld hl, SpritePattern_PlayerPlane_0_and_179 otir81 82 ld a, 0000 0001 b83 ld hl, SPRPAT + 6484 call SetVdp_Write85 ld b, SpritePattern_PlayerPlane_2_and_3.size86 ld c, PORT_0 87 ld hl, SpritePattern_PlayerPlane_2_and_388 otir90 91 ld a, 0000 0001 b92 ld hl, SPRPAT + 12893 call SetVdp_Write94 ld b, SpritePattern_PlayerShot.size95 ld c, PORT_0 96 ld hl, SpritePattern_PlayerShot97 otir99 100 ld a, 0000 0001 b101 ld hl, SPRPAT + 128 + SpritePattern_PlayerShot.size102 call SetVdp_Write103 ld b, SpritePattern_EnemyPlane_0_and_1.size104 ld c, PORT_0 105 ld hl, SpritePattern_EnemyPlane_0_and_1106 otir109111 112 ld a, 0000 0001 b113 ld hl, SPRCOL114 call SetVdp_Write115 ld b, SpriteColors_PlayerPlane_0_and_1.size116 ld c, PORT_0 117 ld hl, SpriteColors_PlayerPlane_0_and_1118 otir120 121 ld a, 0000 0001 b122 ld hl, SPRCOL + 32123 call SetVdp_Write124 ld b, SpriteColors_PlayerPlane_2_and_3.size125 ld c, PORT_0 126 ld hl, SpriteColors_PlayerPlane_2_and_3127 otir129 130 ld a, 0000 0001 b131 ld hl, SPRCOL + 64132 call SetVdp_Write133 ld b, SpriteColors_PlayerShot.size134 ld c, PORT_0 135 ld hl, SpriteColors_PlayerShot136 otir138 139 ld a, 0000 0001 b140 ld hl, SPRCOL + 64 + 16141 call SetVdp_Write142 ld b, SpriteColors_PlayerShot.size143 ld c, PORT_0 144 ld hl, SpriteColors_PlayerShot145 otir147 148 ld a, 0000 0001 b149 ld hl, SPRCOL + 64 + 32150 call SetVdp_Write151 ld b, SpriteColors_PlayerShot.size152 ld c, PORT_0 153 ld hl, SpriteColors_PlayerShot154 otir156 157 ld a, 0000 0001 b158 ld hl, SPRCOL + 64 + 32 + 16159 call SetVdp_Write160 ld b, SpriteColors_EnemyPlane_0_and_1.size161 ld c, PORT_0 162 ld hl, SpriteColors_EnemyPlane_0_and_1163 otir169 178180 187 192 retMain.s17 UpdateSpriteAttributesTable.s1PLAYER_SPR_PAT_0_NUMBER: equ 0 * 42PLAYER_SPR_PAT_1_NUMBER: equ 1 * 43PLAYER_SPR_PAT_2_NUMBER: equ 2 * 44PLAYER_SPR_PAT_3_NUMBER: equ 3 * 45PLAYER_SHOT_SPR_PAT_NUMBER: equ 4 * 46ENEMY_SPR_PAT_0_NUMBER: equ 5 * 47ENEMY_SPR_PAT_1_NUMBER: equ 6 * 48EMPTY_SPR_PAT_NUMBER: equ 63 * 410UpdateSpriteAttributesTable:11 ld hl, SpriteAttrTableBuffer14 15 ld a, (Player_Y)16 ld (hl), a18 inc hl19 ld a, (Player_X)20 ld (hl), a22 inc hl23 26 inc hl27 3032 33 inc hl34 ld a, (Player_Y)35 ld (hl), a37 inc hl38 ld a, (Player_X)39 ld (hl), a41 inc hl42 45 inc hl46 4951 52 inc hl53 ld a, (Player_Y)54 ld b, 1655 add a, b56 ld (hl), a58 inc hl59 ld a, (Player_X)60 ld (hl), a62 inc hl63 66 inc hl67 7072 73 inc hl74 ld a, (Player_Y)75 ld b, 1676 add a, b77 ld (hl), a79 inc hl80 ld a, (Player_X)81 ld (hl), a83 inc hl84 87 inc hl88 9193 94 inc hl95 ld a, (PlayerShot_0_Struct + 2) 96 ld (hl), a98 inc hl99 ld a, (PlayerShot_0_Struct + 1) 100 ld (hl), a102 inc hl103 ld a, (PlayerShot_0_Struct) 104 or a105 ld a, PLAYER_SHOT_SPR_PAT_NUMBER106 jp nz, .sprite_4_continue 107 ld a, EMPTY_SPR_PAT_NUMBER108.sprite_4_continue:109 ld (hl), a111 inc hl113115 116 inc hl117 ld a, (PlayerShot_1_Struct + 2) 118 ld (hl), a120 inc hl121 ld a, (PlayerShot_1_Struct + 1) 122 ld (hl), a124 inc hl125 ld a, (PlayerShot_1_Struct) 126 or a127 ld a, PLAYER_SHOT_SPR_PAT_NUMBER128 jp nz, .sprite_5_continue 129 ld a, EMPTY_SPR_PAT_NUMBER130.sprite_5_continue:131 ld (hl), a133 inc hl135137 138 inc hl139 ld a, (PlayerShot_2_Struct + 2) 140 ld (hl), a142 inc hl143 ld a, (PlayerShot_2_Struct + 1) 144 ld (hl), a146 inc hl147 ld a, (PlayerShot_2_Struct) 148 or a149 ld a, PLAYER_SHOT_SPR_PAT_NUMBER150 jp nz, .sprite_6_continue 151 ld a, EMPTY_SPR_PAT_NUMBER152.sprite_6_continue:153 ld (hl), a155 inc hl157159161 162 inc hl163 ld a, (Enemy_0_Struct + 2) 164 ld (hl), a166 inc hl167 ld a, (Enemy_0_Struct + 1) 168 ld (hl), a170 inc hl171 ld a, (Enemy_0_Struct + 4) 172 ld (hl), a174 inc hl175 178180 181 inc hl182 ld a, (Enemy_0_Struct + 2) 183 ld (hl), a185 inc hl186 ld a, (Enemy_0_Struct + 1) 187 ld (hl), a189 inc hl190 ld a, (Enemy_0_Struct + 5) 191 ld (hl), a193 inc hl194 197199 200 ld a, 0000 0001 b201 ld hl, SPRATR202 call SetVdp_Write203 205 ld bc, 0 + ((SpriteAttrTableBuffer.size * 256) + PORT_0)206 ld hl, SpriteAttrTableBuffer207 otir212 retMain.s18 InitVariables.s1PLAYER_INITIAL_X: equ 128 - (PLANE_PLAYER_WIDTH/2)2PLAYER_INITIAL_Y: equ 192 - 324InitVariables:6 ld a, PLAYER_INITIAL_X7 ld (Player_X), a9 ld a, PLAYER_INITIAL_Y10 ld (Player_Y), a11 ld (Player_Y_Static), a14 ld hl, PlayerShot_0_Struct15 call PlayerShot_Reset16 ld hl, PlayerShot_1_Struct17 call PlayerShot_Reset18 ld hl, PlayerShot_2_Struct19 call PlayerShot_Reset20 28 ld hl, Enemy_0_Struct29 call Enemy_Reset30 33 34 ld hl, PlayerShot_0_Struct35 ld (NextShot_Struct_Addr), hl37 ld a, 25538 ld (Player_FramesSinceLastShot), a41 xor a42 ld (Screen_Y_Origin), a45 ld hl, 046 ld (LevelCounter), hl49 ld hl, Level_1_Data50 ld (LevelData_CurrentAddr), hl54 55 ld hl, InitialSpriteAttributes56 ld de, SpriteAttrTableBuffer57 ld bc, InitialSpriteAttributes.size58 ldir62 retMain.s19 Scroll.s1InitVariablesForScroll:2 3 ld a, 134 ld (CurrentMegaROMPage), a5 ld hl, ADDR_LAST_LINE_OF_PAGE6 ld (CurrentAddrLineScroll), hl7 ld hl, 255 * 2568 ld (CurrentVRAMAddrLineScroll), hl10 11 xor a12 ld (VerticalScroll), a14 18 ret20LoadFirstScreen:2122 ld a, 1423 ld (Seg_P8000_SW), a24 25 ld hl, ImageData_14 26 ld de, NAMTBL + (0 * (256 * 64)) 27 ld bc, ImageData_14.size 28 call BIOS_LDIRVM 29 30 31 ld a, 1532 ld (Seg_P8000_SW), a33 34 ld hl, ImageData_15 35 ld de, NAMTBL + (1 * (256 * 64)) 36 ld bc, ImageData_15.size 37 call BIOS_LDIRVM 39 40 ld a, 1641 ld (Seg_P8000_SW), a42 43 ld hl, ImageData_16 44 ld de, NAMTBL + (2 * (256 * 64)) 45 ld bc, ImageData_16.size 46 call BIOS_LDIRVM 49 ret53ExecuteScroll:55 57 59 ld a, (CurrentMegaROMPage)60 ld (Seg_P8000_SW), a61 ld hl, (CurrentAddrLineScroll) 62 ld de, (CurrentVRAMAddrLineScroll) 63 ld bc, 256 64 call BIOS_LDIRVM 70 71 ld de, (CurrentVRAMAddrLineScroll)72 dec d 73 ld hl, (CurrentAddrLineScroll)74 dec h 75 ld a, h76 cp 0x80 - 177 jp z, .decPage78 jp .dontDecPage79.decPage:80 ld a, (CurrentMegaROMPage)81 dec a82 jp z, .stopScroll83 ld (CurrentMegaROMPage), a84 ld hl, ADDR_LAST_LINE_OF_PAGE85.dontDecPage:86 ld (CurrentAddrLineScroll), hl87 ld (CurrentVRAMAddrLineScroll), de90 92 98 99 ld hl, VerticalScroll100 dec (hl)101 ld b, (hl) 103 ld c, 23 104 call BIOS_WRTVDP107 ld hl, Screen_Y_Origin108 dec (hl)111 ret113.stopScroll:114 jp .stopScroll118AdjustSprites_Y:119 121 ld hl, Player_Y122 call .adjustSprite125 ld hl, PlayerShot_0_Struct + 2126 call .adjustSprite127 ld hl, PlayerShot_1_Struct + 2128 call .adjustSprite129 ld hl, PlayerShot_2_Struct + 2130 call .adjustSprite131 133 ld hl, Enemy_0_Struct + 2134 call .adjustSprite135 137 ret139.adjustSprite:140 ld a, (hl)141 dec a142 cp 216 143 jp nz, .continue144 ld a, 215145.continue:146 ld (hl), a147 retMain.s20 ReadInput.s1PLANE_PLAYER_WIDTH: equ 212PLANE_PLAYER_HEIGHT: equ 313PLANE_PLAYER_PIXELS_PER_MOV: equ 35ReadInput:6 7 ld a, 8 8 call BIOS_SNSMAT 9 ld e, a 12 push de13 bit 0, a 14 call z, .shot15 pop de17 ld a, e18 bit 4, a 19 call z, .playerLeft21 ld a, e22 bit 7, a 23 call z, .playerRight24 25 ld a, e26 bit 5, a 27 call z, .playerUp29 ld a, e30 bit 6, a 31 call z, .playerDown33 ret35.playerLeft:36 ld a, (Player_X)37 sub PLANE_PLAYER_PIXELS_PER_MOV38 ret c39 ld (Player_X), a41 46 ret48.playerRight:49 ld a, (Player_X)50 add PLANE_PLAYER_PIXELS_PER_MOV51 cp 255 - PLANE_PLAYER_WIDTH52 ret nc53 ld (Player_X), a55 60 ret62.playerUp:63 ld a, (Player_Y_Static)64 sub PLANE_PLAYER_PIXELS_PER_MOV65 ret c66 ld (Player_Y_Static), a68 ld a, (Player_Y)69 sub PLANE_PLAYER_PIXELS_PER_MOV70 ld (Player_Y), a72 ret74.playerDown:75 ld a, (Player_Y_Static)76 add PLANE_PLAYER_PIXELS_PER_MOV77 cp 191 - PLANE_PLAYER_HEIGHT78 ret nc79 ld (Player_Y_Static), a81 ld a, (Player_Y)82 add PLANE_PLAYER_PIXELS_PER_MOV83 ld (Player_Y), a85 ret87.shot:88 89 ld hl, (NextShot_Struct_Addr)90 call PlayerShot_Init92 ret94Main.s21 GameLogic/GameLogic.s13GameLogic:5 ld hl, PlayerShot_0_Struct6 call PlayerShot_Logic7 ld hl, PlayerShot_1_Struct8 call PlayerShot_Logic9 ld hl, PlayerShot_2_Struct10 call PlayerShot_Logic11 19 21 ld hl, Enemy_0_Struct22 call Enemy_Logic24 26 ld hl, (LevelCounter)27 inc hl28 ld (LevelCounter), hl31 32 ld hl, (LevelData_CurrentAddr)33 ld de, (LevelCounter)34.loop:35 push hl 36 push de37 38 ld a, (hl)39 inc hl40 ld h, (hl)41 ld l, a43 44 or h45 jp z, .endOfLevelData47 48 call BIOS_DCOMPR 49 pop de50 pop hl52 ld (LevelData_CurrentAddr), hl53 jp z, .executeLevelData54 jp nc, .exitLevelData 56 57 ld bc, LevelData_Temp_Struct.size58 add hl, bc59 jp .loop61.endOfLevelData:62 pop de 63 pop hl64 jp .exitLevelData66.executeLevelData:67 call BIOS_BEEP70 ld hl, Enemy_0_Struct71 72 call Enemy_Init73 75.exitLevelData:81 83 84 ld a, (Player_FramesSinceLastShot)85 inc a86 ret z87 88 ld (Player_FramesSinceLastShot), a91 ret92Main.s22 GameLogic/PlayerShotLogic.s12FRAMES_BETWEEN_PLAYER_SHOTS: equ 446PlayerShot_Init:8 9 ld a, (Player_FramesSinceLastShot)10 cp FRAMES_BETWEEN_PLAYER_SHOTS11 ret c13 xor a14 ld (Player_FramesSinceLastShot), a18 ld a, (hl) 19 or a20 ret nz 23 ld a, (Player_Y_Static)24 cp 1625 ret c 28 inc a29 ld (hl), a 31 inc hl32 ld a, (Player_X)33 ld (hl), a 35 inc hl36 ld a, (Player_Y)37 sub 1638 ld (hl), a 40 inc hl41 ld a, (Player_Y_Static)42 sub 1643 ld (hl), a 45 46 ld hl, (NextShot_Struct_Addr)48 ld bc, PlayerShot_Temp_Struct.size49 add hl, bc51 ld de, PlayerShot_2_Struct + PlayerShot_Temp_Struct.size52 call BIOS_DCOMPR 53 jp nz, .dontResetNextShot55 ld hl, PlayerShot_0_Struct 57.dontResetNextShot:58 ld (NextShot_Struct_Addr), hl61 ret6365PlayerShot_Reset:66 xor a67 ld (hl), a 69 inc hl70 ld a, 25571 ld (hl), a 73 inc hl74 77 inc hl78 ld a, 19279 ld (hl), a 81 ret8385PlayerShot_Logic:86 ld a, (hl) 87 or a88 ret z 90 inc hl91 inc hl92 inc hl93 ld a, (hl) 94 cp 895 jp c, .shotReset 96 sub 897 ld (hl), a100 dec hl101 ld a, (hl) 102 sub 8103 ld (hl), a105 ret107.shotReset:108 dec hl 109 dec hl110 dec hl111 call PlayerShot_Reset112 ret113Main.s23 GameLogic/EnemyLogic.s14Enemy_Init:6 8 ld a, 19 ld (hl), a 11 inc hl12 ld a, 128 13 ld (hl), a 15 inc hl16 ld a, (Screen_Y_Origin)17 ld (hl), a 19 inc hl20 xor a21 ld (hl), a 23 inc hl24 ld a, ENEMY_SPR_PAT_0_NUMBER25 ld (hl), a 27 inc hl28 ld a, ENEMY_SPR_PAT_1_NUMBER29 ld (hl), a 31 ret3537Enemy_Reset:38 xor a39 ld (hl), a 41 inc hl42 ld a, 25543 ld (hl), a 45 inc hl46 48 inc hl49 ld a, 19250 ld (hl), a 52 inc hl53 ld a, EMPTY_SPR_PAT_NUMBER54 ld (hl), a 56 inc hl57 ld a, EMPTY_SPR_PAT_NUMBER58 ld (hl), a 60 ret6466Enemy_Logic:67 ld a, (hl) 68 or a69 ret z 71 inc hl72 inc hl73 inc hl74 ld a, (hl) 75 cp 19276 jp nc, .enemyReset 77 add 278 ld (hl), a81 dec hl82 ld a, (hl) 83 add 284 ld (hl), a86 ret88.enemyReset:89 dec hl 90 dec hl91 dec hl92 call Enemy_Reset93 ret94Main.s24 LevelData/Level1.s1ENEMY_TYPE_1: equ 14Level_1_Data:5 dw 60 db ENEMY_TYPE_16 dw 300 db ENEMY_TYPE_17 10 11 dw 0 db 012Main.s26 27 Graphics/Sprites/SpriteAssets.s1PaletteData:2 INCBIN "Graphics/Sprites/player_plane_0.pal"4 2325SpritePattern_PlayerPlane_0_and_1:26 INCBIN "Graphics/Sprites/player_plane_0.pat"27.size: equ $ - SpritePattern_PlayerPlane_0_and_128SpritePattern_PlayerPlane_2_and_3:29 INCBIN "Graphics/Sprites/player_plane_1.pat"30.size: equ $ - SpritePattern_PlayerPlane_2_and_332SpritePattern_PlayerShot:33 Graphics/Sprites/player_shot_pattern.s1 db 01000100b2 db 11001100b3 db 11001110b4 db 11001110b5 db 11101110b6 db 11101110b7 db 11101110b8 db 11101110b9 db 11101100b10 db 11101100b11 db 01100100b12 db 01100100b13 db 01000100b14 db 01000100b15 db 01000000b16 db 01000100b17 db 01001100b18 db 11001010b19 db 11001110b20 db 11101110b21 db 11101110b22 db 11101110b23 db 11101110b24 db 11101100b25 db 11101100b26 db 01100100b27 db 01000100b28 db 01000100b29 db 01000100b30 db 01000100b31 db 01000100b32 db 00000000bGraphics/Sprites/SpriteAssets.s34.size: equ $ - SpritePattern_PlayerShot36SpritePattern_EnemyPlane_0_and_1:37 INCBIN "Graphics/Sprites/enemy_plane.pat"38.size: equ $ - SpritePattern_EnemyPlane_0_and_14143SpriteColors_PlayerPlane_0_and_1:44 INCBIN "Graphics/Sprites/player_plane_0.col"45.size: equ $ - SpriteColors_PlayerPlane_0_and_146SpriteColors_PlayerPlane_2_and_3:47 INCBIN "Graphics/Sprites/player_plane_1.col"48.size: equ $ - SpriteColors_PlayerPlane_2_and_350SpriteColors_PlayerShot:51 Graphics/Sprites/player_shot_color.s1 db 132 db 133 db 134 db 135 db 136 db 97 db 98 db 99 db 510 db 511 db 512 db 513 db 514 db 515 db 516 db 5Graphics/Sprites/SpriteAssets.s52.size: equ $ - SpriteColors_PlayerShot54SpriteColors_EnemyPlane_0_and_1:55 INCBIN "Graphics/Sprites/enemy_plane.col"56.size: equ $ - SpriteColors_EnemyPlane_0_and_157Main.s29Execute:30 call EnableRomPage232 33 ld a, 134 ld (Seg_P8000_SW), a36 call InitVram4041 call ClearRam44 call InitVariables47 call LoadFirstScreen50 call BIOS_ENASCR5254ADDR_LAST_LINE_OF_PAGE: equ 0x8000 + (63 * 256)57 call InitVariablesForScroll59 68 71.gameLoop:72 ld hl, BIOS_JIFFY 73 ld a, (hl)74.waitVBlank:75 cp (hl)76 jr z, .waitVBlank78 call ExecuteScroll80 call AdjustSprites_Y82 call UpdateSpriteAttributesTable84 call ReadInput86 call GameLogic90 96 jp .gameLoop102End:108InitialSpriteAttributes:109 111113 114 db PLAYER_INITIAL_Y, PLAYER_INITIAL_X, PLAYER_SPR_PAT_0_NUMBER, 0115 db PLAYER_INITIAL_Y, PLAYER_INITIAL_X, PLAYER_SPR_PAT_1_NUMBER, 0117 118 db PLAYER_INITIAL_Y + 16, PLAYER_INITIAL_X, PLAYER_SPR_PAT_2_NUMBER, 0119 db PLAYER_INITIAL_Y + 16, PLAYER_INITIAL_X, PLAYER_SPR_PAT_3_NUMBER, 0121123 124 db 192, 255, EMPTY_SPR_PAT_NUMBER, 0125 db 192, 255, EMPTY_SPR_PAT_NUMBER, 0126 db 192, 255, EMPTY_SPR_PAT_NUMBER, 0128130 131 db 10, 10, ENEMY_SPR_PAT_0_NUMBER, 0132 db 10, 10, ENEMY_SPR_PAT_1_NUMBER, 0134135 db 216, 0, 0, 0137.size: equ $ - InitialSpriteAttributes146 db "End ROM started at 0x4000"148 ds PageSize - ($ - 0x4000), 255 153160161 MegaRomPages.s134 org 0x8000, 0xBFFF5ImageData_1:6 INCBIN "Graphics/Bitmaps/aerofighters_0.sra.new"7 8.size: equ $ - ImageData_19 ds PageSize - ($ - 0x8000), 2551112 org 0x8000, 0xBFFF13ImageData_2:14 INCBIN "Graphics/Bitmaps/aerofighters_1.sra.new"15 16.size: equ $ - ImageData_217 ds PageSize - ($ - 0x8000), 2551920 org 0x8000, 0xBFFF21ImageData_3:22 INCBIN "Graphics/Bitmaps/aerofighters_2.sra.new"23 24.size: equ $ - ImageData_325 ds PageSize - ($ - 0x8000), 2552728 org 0x8000, 0xBFFF29ImageData_4:30 INCBIN "Graphics/Bitmaps/aerofighters_3.sra.new"31 32.size: equ $ - ImageData_433 ds PageSize - ($ - 0x8000), 2553536 org 0x8000, 0xBFFF37ImageData_5:38 INCBIN "Graphics/Bitmaps/aerofighters_4.sra.new"39 40.size: equ $ - ImageData_541 ds PageSize - ($ - 0x8000), 2554344 org 0x8000, 0xBFFF45ImageData_6:46 INCBIN "Graphics/Bitmaps/aerofighters_5.sra.new"47 48.size: equ $ - ImageData_649 ds PageSize - ($ - 0x8000), 2555152 org 0x8000, 0xBFFF53ImageData_7:54 INCBIN "Graphics/Bitmaps/aerofighters_6.sra.new"55 56.size: equ $ - ImageData_757 ds PageSize - ($ - 0x8000), 2555960 org 0x8000, 0xBFFF61ImageData_8:62 INCBIN "Graphics/Bitmaps/aerofighters_7.sra.new"63 64.size: equ $ - ImageData_865 ds PageSize - ($ - 0x8000), 2556768 org 0x8000, 0xBFFF69ImageData_9:70 INCBIN "Graphics/Bitmaps/aerofighters_8.sra.new"71 72.size: equ $ - ImageData_973 ds PageSize - ($ - 0x8000), 2557576 org 0x8000, 0xBFFF77ImageData_10:78 INCBIN "Graphics/Bitmaps/aerofighters_9.sra.new"79 80.size: equ $ - ImageData_1081 ds PageSize - ($ - 0x8000), 2558384 org 0x8000, 0xBFFF85ImageData_11:86 INCBIN "Graphics/Bitmaps/aerofighters_10.sra.new"87 88.size: equ $ - ImageData_1189 ds PageSize - ($ - 0x8000), 2559192 org 0x8000, 0xBFFF93ImageData_12:94 INCBIN "Graphics/Bitmaps/aerofighters_11.sra.new"95 96.size: equ $ - ImageData_1297 ds PageSize - ($ - 0x8000), 25599100 org 0x8000, 0xBFFF101ImageData_13:102 INCBIN "Graphics/Bitmaps/aerofighters_12.sra.new"103 104.size: equ $ - ImageData_13105 ds PageSize - ($ - 0x8000), 255107108 org 0x8000, 0xBFFF109ImageData_14:110 INCBIN "Graphics/Bitmaps/aerofighters_13.sra.new"111 112.size: equ $ - ImageData_14113 ds PageSize - ($ - 0x8000), 255115116 org 0x8000, 0xBFFF117ImageData_15:118 INCBIN "Graphics/Bitmaps/aerofighters_14.sra.new"119 120.size: equ $ - ImageData_15121 ds PageSize - ($ - 0x8000), 255123124 org 0x8000, 0xBFFF125ImageData_16:126 INCBIN "Graphics/Bitmaps/aerofighters_15.sra.new"127 128.size: equ $ - ImageData_16129 ds PageSize - ($ - 0x8000), 255130Main.s166167 org 0xc000, 0xe5ff 169RamStart:170 Variables.s1Player_X: rb 12Player_Y: rb 13Player_Y_Static: rb 1 57PlayerShot_Temp_Struct:8PlayerShot_Temp_Status: rb 1 9PlayerShot_Temp_X: rb 110PlayerShot_Temp_Y: rb 111PlayerShot_Temp_Y_Static: rb 1 12PlayerShot_Temp_Struct.size: equ $ - PlayerShot_Temp_Struct16PlayerShot_0_Struct: rb PlayerShot_Temp_Struct.size17PlayerShot_1_Struct: rb PlayerShot_Temp_Struct.size18PlayerShot_2_Struct: rb PlayerShot_Temp_Struct.size1924NextShot_Struct_Addr: rw 125Player_FramesSinceLastShot: rb 12729Enemy_Temp_Struct:30Enemy_Temp_Status: rb 1 31Enemy_Temp_X: rb 132Enemy_Temp_Y: rb 133Enemy_Temp_Y_Static: rb 1 34Enemy_Temp_Pattern_0: rb 135Enemy_Temp_Pattern_1: rb 136Enemy_Temp_Struct.size: equ $ - Enemy_Temp_Struct40Enemy_0_Struct: rb Enemy_Temp_Struct.size41Enemy_1_Struct: rb Enemy_Temp_Struct.size42Enemy_2_Struct: rb Enemy_Temp_Struct.size43Enemy_3_Struct: rb Enemy_Temp_Struct.size44Enemy_4_Struct: rb Enemy_Temp_Struct.size45Enemy_5_Struct: rb Enemy_Temp_Struct.size4850LevelData_Temp_Struct:51LevelData_Temp_Counter: rw 152LevelData_Temp_EnemyType: rb 153LevelData_Temp_Struct.size: equ $ - LevelData_Temp_Struct5760LevelCounter: rw 162LevelData_CurrentAddr: rw 165Screen_Y_Origin: rb 1 68VerticalScroll: rb 169CurrentMegaROMPage: rb 170CurrentAddrLineScroll: rw 171CurrentVRAMAddrLineScroll: rw 17476Debug_Temp_Byte: rb 177Debug_Temp_Word: rw 18689SpriteAttrTableBuffer: rb 32 * 490.size: equ $ - SpriteAttrTableBuffer91Main.s171RamEnd: